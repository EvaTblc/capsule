<h2 class="style-title"><%= @collection.name %> - <%= @category.name %></h2>
<div class="item-actions">
  <%= link_to "← Retour", collection_categories_path, class: "btn-action" %>
  <%= link_to "🗑️ Supprimer", collection_path(@collection),
      method: :delete, data: { turbo_confirm: "Supprimer cette collection ?" }, class: "btn-action delete" %>
</div>

<% if @category.items.empty? %>
  <% case @category.name %>
  <% when "Livre" %>
    <%= render "add_book", collection: @collection, category: @category, item: @item %>
  <% when "Jeux Vidéo" %>
    <%= render "add_videogame", collection: @collection, category: @category, item: @item %>
  <% when "Film" %>
    <%= render "add_movie", collection: @collection, category: @category, item: @item %>
  <% when "Figurine" %>
    <%= render "add_toy", collection: @collection, category: @category, item: @item %>
  <% when "Autres" %>
    <%= render "add_item", collection: @collection, category: @category, item: @item %>
  <% end %>
<% else %>
  <div class="cards-wrapper">
    <% @category.items.each do |item| %>
      <%= link_to collection_category_item_path(@collection, @category, item) do %>
        <div class="collection-card"
            style="background-image: url('<%= item.photos.attached? ? cl_image_path(item.photos.first.key) : asset_path('default_collection.jpg') %>')">
          <div class="collection-overlay">
            <h2><%= item.name %></h2>
          </div>
        </div>
      <% end %>
    <% end %>
<% end %>

</div>
