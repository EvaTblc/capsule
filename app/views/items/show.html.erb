<div class="container-scrollable">
  <div class="style-title">
    <h2><%= @item.name %></h2>
      <div class="infos-item">

        <div class="info-pill">
          <i class="fas fa-layer-group"></i>
          <span><%= @item.category.name %></span>
        </div>

        <div class="info-pill">
          <i class="fas fa-star-half-alt"></i>
          <span><%= @item.state %></span>
        </div>


      <div class="info-pill">
        <i class="fas fa-cube"></i>
        <span>x<%= @item.possession %></span>
      </div>
    </div>
  </div>

<div class="item-actions">
    <%= link_to "← Retour", collection_path(@collection), class: "btn-action" %>
    <%= link_to "✏️ Modifier", edit_collection_item_path(@collection, @item), class: "btn-action" %>
    <%= link_to "🗑️ Supprimer", collection_item_path(@collection, @item),
        method: :delete, data: { turbo_confirm: "Supprimer cet item ?" }, class: "btn-action delete" %>
  </div>
  <div data-controller="photo-modal">
    <% photos = @item.photos.to_a %>

    <% if photos[0] %>
      <div class="photo-hero">
        <%= image_tag url_for(photos[0]), class: "photo-hero-img", data: { action: "click->photo-modal#show", photo_modal_url_value: url_for(photos[0]) } %>
      </div>
    <% end %>

    <% if photos.size > 1 %>
      <div class="photo-gallery">
        <% photos[1..].each do |photo| %>
          <%= image_tag url_for(photo), class: "photo-gallery-thumb", data: { action: "click->photo-modal#show", photo_modal_url_value: url_for(photo) } %>
        <% end %>
      </div>
    <% end %>

    <div data-photo-modal-target="overlay" class="modal hidden">
      <div class="modal-content">
        <img data-photo-modal-target="image" src="" alt="Photo agrandie">
        <button data-action="click->photo-modal#hide" class="modal-close">Fermer</button>
      </div>
    </div>
  </div>

  <div class="infos-tags">

    <% @tags.each do |tag| %>
      <div class="info-pill">
        <i class="fas fa-tag"></i>
        <span><%= tag.name %></span>
      </div>
      <div class="info-pill">
        <i class="fas fa-calendar-alt"></i>
        <span><%= tag.year %></span>
      </div>
      <div class="info-pill comment">
        <i class="fas fa-comment-dots"></i>
        <span><%= tag.comments %></span>
      </div>
    <% end %>
  </div>
</div>
